<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <h1>Hello</h1>
    <script>
      function getData(cb) {
        var xhttp = new XMLHttpRequest();
        xhttp.onreadystatechange = function() {
          if (this.readyState == 4 && this.status == 200) {
            // Typical action to be performed when the document is ready:
            cb(xhttp.responseText);
          }
        };
        xhttp.open("GET", "https://jsonplaceholder.typicode.com/todos/1", true);
        xhttp.send();
      }
      let p = new Promise((res, rej) => {
        res("first msg");
      }).then(data => {
        console.log(data);
      });

      /// ========================= ////
      function myFetch(url) {
        return new Promise((res, rej) => {
          var xhttp = new XMLHttpRequest();
          xhttp.onreadystatechange = function() {
            if (this.readyState == 4 && this.status == 200) {
              res({
                json: function() {
                  return JSON.parse(xhttp.responseText);
                }
              });
            }
          };
          xhttp.open("GET", url, true);
          xhttp.send();
        });
      }
      fetch("https://jsonplaceholder.typicode.com/todos")
        .then(response => {
          return response.json();
        })
        .then(data => {
          console.log(data);
        });

      /// how could we catch the error
      //  how could we do the second fetch based on the current response data
      //  wht is promise all
    </script>
  </body>
</html>
